<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Build and Publish Container Images using GitHub Actions | Daniel Brennand</title>
<meta name=keywords content="DevOps,CI/CD,GitHub Actions,Containers,Docker"><meta name=description content="And we&rsquo;re back! &#x1f44b;
In this blog post we will be looking at building and publishing a container image to GitHub Packages using GitHub Actions!
I recently revisited an old project of mine; now called speeder. It&rsquo;s a Python script to monitor your internet speed and send the results to InfluxDB. The results can then be visualised in Grafana. I originally created this script during the Coronavirus lockdowns whilst internet usage was high and essential for work. Since that time, I&rsquo;ve learned a lot about CI/CD and noticed I hadn&rsquo;t automated the build and publish process of the container image! üò¨ Time to fix that! üë∑"><meta name=author content="Daniel Brennand"><link rel=canonical href=https://dbren.uk/blog/build-and-publish-container-image-gha/><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://dbren.uk/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://dbren.uk/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://dbren.uk/favicon-32x32.png><link rel=apple-touch-icon href=https://dbren.uk/apple-touch-icon.png><link rel=mask-icon href=https://dbren.uk/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://dbren.uk/blog/build-and-publish-container-image-gha/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://dbren.uk/blog/build-and-publish-container-image-gha/"><meta property="og:site_name" content="Daniel Brennand"><meta property="og:title" content="Build and Publish Container Images using GitHub Actions"><meta property="og:description" content="And we‚Äôre back! üëã
In this blog post we will be looking at building and publishing a container image to GitHub Packages using GitHub Actions!
I recently revisited an old project of mine; now called speeder. It‚Äôs a Python script to monitor your internet speed and send the results to InfluxDB. The results can then be visualised in Grafana. I originally created this script during the Coronavirus lockdowns whilst internet usage was high and essential for work. Since that time, I‚Äôve learned a lot about CI/CD and noticed I hadn‚Äôt automated the build and publish process of the container image! üò¨ Time to fix that! üë∑"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2023-09-09T16:27:02+01:00"><meta property="article:modified_time" content="2023-09-09T16:27:02+01:00"><meta property="article:tag" content="DevOps"><meta property="article:tag" content="CI/CD"><meta property="article:tag" content="GitHub Actions"><meta property="article:tag" content="Containers"><meta property="article:tag" content="Docker"><meta name=twitter:card content="summary"><meta name=twitter:title content="Build and Publish Container Images using GitHub Actions"><meta name=twitter:description content="And we&rsquo;re back! &#x1f44b;
In this blog post we will be looking at building and publishing a container image to GitHub Packages using GitHub Actions!
I recently revisited an old project of mine; now called speeder. It&rsquo;s a Python script to monitor your internet speed and send the results to InfluxDB. The results can then be visualised in Grafana. I originally created this script during the Coronavirus lockdowns whilst internet usage was high and essential for work. Since that time, I&rsquo;ve learned a lot about CI/CD and noticed I hadn&rsquo;t automated the build and publish process of the container image! üò¨ Time to fix that! üë∑"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blogs","item":"https://dbren.uk/blog/"},{"@type":"ListItem","position":2,"name":"Build and Publish Container Images using GitHub Actions","item":"https://dbren.uk/blog/build-and-publish-container-image-gha/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Build and Publish Container Images using GitHub Actions","name":"Build and Publish Container Images using GitHub Actions","description":"And we\u0026rsquo;re back! \u0026#x1f44b;\nIn this blog post we will be looking at building and publishing a container image to GitHub Packages using GitHub Actions!\nI recently revisited an old project of mine; now called speeder. It\u0026rsquo;s a Python script to monitor your internet speed and send the results to InfluxDB. The results can then be visualised in Grafana. I originally created this script during the Coronavirus lockdowns whilst internet usage was high and essential for work. Since that time, I\u0026rsquo;ve learned a lot about CI/CD and noticed I hadn\u0026rsquo;t automated the build and publish process of the container image! üò¨ Time to fix that! üë∑\n","keywords":["DevOps","CI/CD","GitHub Actions","Containers","Docker"],"articleBody":"And we‚Äôre back! üëã\nIn this blog post we will be looking at building and publishing a container image to GitHub Packages using GitHub Actions!\nI recently revisited an old project of mine; now called speeder. It‚Äôs a Python script to monitor your internet speed and send the results to InfluxDB. The results can then be visualised in Grafana. I originally created this script during the Coronavirus lockdowns whilst internet usage was high and essential for work. Since that time, I‚Äôve learned a lot about CI/CD and noticed I hadn‚Äôt automated the build and publish process of the container image! üò¨ Time to fix that! üë∑\nWhat is CI/CD? Before we get started, let‚Äôs take a quick look at what CI/CD is. According to ChatGPT:\nContinuous Integration (CI) is the practice of frequently and automatically integrating code changes from multiple developers, leading to early issue detection and smoother teamwork. Continuous Delivery (CD) extends CI by automating the deployment process, allowing for faster and more reliable software releases. The benefits of CI/CD include quicker development cycles, higher software quality, reduced errors, and more frequent and reliable software updates.\nThanks ChatGPT! ü§ñ\nIn short, CI/CD helps developers to automate the process of building, testing and deploying software. It reduces the time and effort required to complete these processes, and helps ensure software is built and tested consistently and reliably.\nBuild and Publish a Container Image using GitHub Actions Begin by creating the GitHub Actions workflow directory .github/workflows in your project:\nmkdir -pv .github/workflows Next, create a .github/workflows/build.yml file with the following content:\nname: Build on: push: tags: - 'v*' env: REGISTRY: ghcr.io # https://docs.github.com/en/actions/learn-github-actions/contexts#github-context IMAGE_NAME: ${{ github.repository }} jobs: build-and-push-image: runs-on: ubuntu-latest # Sets the permissions granted to the `GITHUB_TOKEN` for the actions in this job permissions: contents: read packages: write steps: - name: Checkout repository uses: actions/checkout@v3 - name: Log in to the Container registry uses: docker/login-action@v2 with: registry: ${{ env.REGISTRY }} username: ${{ github.actor }} # https://docs.github.com/en/actions/security-guides/automatic-token-authentication password: ${{ secrets.GITHUB_TOKEN }} - name: Extract metadata (tags, labels) for Docker id: meta uses: docker/metadata-action@v4 with: images: ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }} - name: Build and push Docker image uses: docker/build-push-action@v4 with: context: . push: true tags: ${{ steps.meta.outputs.tags }} labels: ${{ steps.meta.outputs.labels }} The above GitHub Actions workflow will perform the following steps üìù:\nCheckout the repository. Login to the GitHub Packages (ghcr.io) container registry. Use git to extract repository metadata to be used for the container image tag(s) and labels. Build the container image and push it to the GitHub Packages container registry. Now, commit and push the build.yml workflow:\ngit add .github/workflows/build.yml git commit -m \"chore: build and publish container image\" git push The workflow will only trigger when a push event occurs for tags matching the pattern v*. To trigger the workflow, create a new tag for your repository following the semver convention:\n# Once PR is merged git checkout main git pull git tag v1.0.0 git push --tags And that‚Äôs it! üéâ Once the tag is pushed the workflow will trigger! Here is an example from my speeder project :slight_smile:\nClosing Thoughts The best part about this workflow is the docker/metadata-action. It uses git metadata from the repository to create the container image‚Äôs labels according to the Open Container Initiative image-spec ‚ù§Ô∏è\n‚ùØ skopeo inspect docker://ghcr.io/dbrennand/speeder | jq .Labels { \"org.opencontainers.image.created\": \"2023-09-07T16:55:29.525Z\", \"org.opencontainers.image.description\": \"Python script to monitor your internet speed! üöÄ Periodically run librespeed/speedtest-cli and send results to InfluxDB.\", \"org.opencontainers.image.licenses\": \"MIT\", \"org.opencontainers.image.revision\": \"1e9dc09c6a95554ecb74f736029ec09c3ba6910c\", \"org.opencontainers.image.source\": \"https://github.com/dbrennand/speeder\", \"org.opencontainers.image.title\": \"speeder\", \"org.opencontainers.image.url\": \"https://github.com/dbrennand/speeder\", \"org.opencontainers.image.version\": \"v1.1.0\" } Overall, this GitHub Actions workflow helps save a lot of time and effort. Furthermore, it helps make sure the container image is built and published consistently and reliably every time! üöÄ\nThat‚Äôs all folks! Thanks for reading! üëã\nReferenced Documentation https://docs.github.com/en/actions/publishing-packages/publishing-docker-images#publishing-images-to-github-packages https://github.com/docker/login-action https://github.com/docker/metadata-action https://github.com/docker/build-push-action ","wordCount":"629","inLanguage":"en","datePublished":"2023-09-09T16:27:02+01:00","dateModified":"2023-09-09T16:27:02+01:00","author":{"@type":"Person","name":"Daniel Brennand"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://dbren.uk/blog/build-and-publish-container-image-gha/"},"publisher":{"@type":"Organization","name":"Daniel Brennand","logo":{"@type":"ImageObject","url":"https://dbren.uk/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://dbren.uk/ accesskey=h title="Daniel Brennand (Alt + H)">Daniel Brennand</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://dbren.uk/blog title=Blog><span>Blog</span></a></li><li><a href=https://dbren.uk/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://dbren.uk/tags title=Tags><span>Tags</span></a></li><li><a href=https://dbren.uk/archives title=Archive><span>Archive</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://dbren.uk/>Home</a>&nbsp;¬ª&nbsp;<a href=https://dbren.uk/blog/>Blogs</a></div><h1 class="post-title entry-hint-parent">Build and Publish Container Images using GitHub Actions</h1><div class=post-meta><span title='2023-09-09 16:27:02 +0100 +0100'>September 9, 2023</span>&nbsp;¬∑&nbsp;3 min&nbsp;¬∑&nbsp;629 words&nbsp;¬∑&nbsp;Daniel Brennand</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#what-is-cicd aria-label="What is CI/CD?">What is CI/CD?</a></li><li><a href=#build-and-publish-a-container-image-using-github-actions aria-label="Build and Publish a Container Image using GitHub Actions">Build and Publish a Container Image using GitHub Actions</a></li><li><a href=#closing-thoughts aria-label="Closing Thoughts">Closing Thoughts</a></li><li><a href=#referenced-documentation aria-label="Referenced Documentation">Referenced Documentation</a></li></ul></div></details></div><div class=post-content><p>And we&rsquo;re back! &#x1f44b;</p><p>In this blog post we will be looking at building and publishing a container image to GitHub Packages using GitHub Actions!</p><p>I recently revisited an old project of mine; now called <a href=https://github.com/dbrennand/speeder>speeder</a>. It&rsquo;s a Python script to monitor your internet speed and send the results to <a href=https://www.influxdata.com/>InfluxDB</a>. The results can then be visualised in <a href=https://github.com/dbrennand/speeder#docker-compose-stack---influxdb-and-grafana>Grafana</a>. I originally created this script during the Coronavirus lockdowns whilst internet usage was high and essential for work. Since that time, I&rsquo;ve learned a lot about CI/CD and noticed I hadn&rsquo;t automated the build and publish process of the container image! üò¨ Time to fix that! üë∑</p><h1 id=what-is-cicd>What is CI/CD?<a hidden class=anchor aria-hidden=true href=#what-is-cicd>#</a></h1><p>Before we get started, let&rsquo;s take a quick look at what CI/CD is. According to ChatGPT:</p><blockquote><p>Continuous Integration (CI) is the practice of frequently and automatically integrating code changes from multiple developers, leading to early issue detection and smoother teamwork. Continuous Delivery (CD) extends CI by automating the deployment process, allowing for faster and more reliable software releases. The benefits of CI/CD include quicker development cycles, higher software quality, reduced errors, and more frequent and reliable software updates.</p></blockquote><p>Thanks ChatGPT! &#x1f916;</p><p>In short, CI/CD helps developers to automate the process of building, testing and deploying software. It reduces the time and effort required to complete these processes, and helps ensure software is built and tested consistently and reliably.</p><h1 id=build-and-publish-a-container-image-using-github-actions>Build and Publish a Container Image using GitHub Actions<a hidden class=anchor aria-hidden=true href=#build-and-publish-a-container-image-using-github-actions>#</a></h1><p>Begin by creating the GitHub Actions workflow directory <code>.github/workflows</code> in your project:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir -pv .github/workflows
</span></span></code></pre></div><p>Next, create a <code>.github/workflows/build.yml</code> file with the following content:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>push</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>tags</span>:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#39;v*&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>REGISTRY</span>: <span style=color:#ae81ff>ghcr.io</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># https://docs.github.com/en/actions/learn-github-actions/contexts#github-context</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>IMAGE_NAME</span>: <span style=color:#ae81ff>${{ github.repository }}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>build-and-push-image</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Sets the permissions granted to the `GITHUB_TOKEN` for the actions in this job</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>permissions</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>contents</span>: <span style=color:#ae81ff>read</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>packages</span>: <span style=color:#ae81ff>write</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Checkout repository</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v3</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Log in to the Container registry</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>docker/login-action@v2</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>registry</span>: <span style=color:#ae81ff>${{ env.REGISTRY }}</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>username</span>: <span style=color:#ae81ff>${{ github.actor }}</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># https://docs.github.com/en/actions/security-guides/automatic-token-authentication</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>password</span>: <span style=color:#ae81ff>${{ secrets.GITHUB_TOKEN }}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Extract metadata (tags, labels) for Docker</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>id</span>: <span style=color:#ae81ff>meta</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>docker/metadata-action@v4</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>images</span>: <span style=color:#ae81ff>${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build and push Docker image</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>docker/build-push-action@v4</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>context</span>: <span style=color:#ae81ff>.</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>push</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>tags</span>: <span style=color:#ae81ff>${{ steps.meta.outputs.tags }}</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>labels</span>: <span style=color:#ae81ff>${{ steps.meta.outputs.labels }}</span>
</span></span></code></pre></div><p>The above GitHub Actions workflow will perform the following steps üìù:</p><ol><li>Checkout the repository.</li><li>Login to the GitHub Packages (<code>ghcr.io</code>) container registry.</li><li>Use git to extract repository metadata to be used for the container image tag(s) and labels.</li><li>Build the container image and push it to the GitHub Packages container registry.</li></ol><p>Now, commit and push the <code>build.yml</code> workflow:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git add .github/workflows/build.yml
</span></span><span style=display:flex><span>git commit -m <span style=color:#e6db74>&#34;chore: build and publish container image&#34;</span>
</span></span><span style=display:flex><span>git push
</span></span></code></pre></div><p>The workflow will only trigger when a <code>push</code> event occurs for tags matching the pattern <code>v*</code>. To trigger the workflow, create a new tag for your repository following the <a href=https://semver.org/>semver convention</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Once PR is merged</span>
</span></span><span style=display:flex><span>git checkout main
</span></span><span style=display:flex><span>git pull
</span></span><span style=display:flex><span>git tag v1.0.0
</span></span><span style=display:flex><span>git push --tags
</span></span></code></pre></div><p>And that&rsquo;s it! üéâ Once the tag is pushed the workflow will trigger! Here is an example from my <a href=https://github.com/dbrennand/speeder/actions/runs/6112609864/job/16590449113>speeder</a> project :slight_smile:</p><h1 id=closing-thoughts>Closing Thoughts<a hidden class=anchor aria-hidden=true href=#closing-thoughts>#</a></h1><p>The best part about this workflow is the <a href=https://github.com/docker/metadata-action>docker/metadata-action</a>. It uses git metadata from the repository to create the container image&rsquo;s labels according to the Open Container Initiative <a href=https://github.com/opencontainers/image-spec/blob/main/annotations.md#pre-defined-annotation-keys>image-spec</a> &#x2764;&#xfe0f;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ skopeo inspect docker://ghcr.io/dbrennand/speeder | jq .Labels
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;org.opencontainers.image.created&#34;</span>: <span style=color:#e6db74>&#34;2023-09-07T16:55:29.525Z&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;org.opencontainers.image.description&#34;</span>: <span style=color:#e6db74>&#34;Python script to monitor your internet speed! üöÄ  Periodically run librespeed/speedtest-cli and send results to InfluxDB.&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;org.opencontainers.image.licenses&#34;</span>: <span style=color:#e6db74>&#34;MIT&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;org.opencontainers.image.revision&#34;</span>: <span style=color:#e6db74>&#34;1e9dc09c6a95554ecb74f736029ec09c3ba6910c&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;org.opencontainers.image.source&#34;</span>: <span style=color:#e6db74>&#34;https://github.com/dbrennand/speeder&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;org.opencontainers.image.title&#34;</span>: <span style=color:#e6db74>&#34;speeder&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;org.opencontainers.image.url&#34;</span>: <span style=color:#e6db74>&#34;https://github.com/dbrennand/speeder&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;org.opencontainers.image.version&#34;</span>: <span style=color:#e6db74>&#34;v1.1.0&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>Overall, this GitHub Actions workflow helps save a lot of time and effort. Furthermore, it helps make sure the container image is built and published consistently and reliably every time! &#x1f680;</p><p>That&rsquo;s all folks! Thanks for reading! &#x1f44b;</p><h1 id=referenced-documentation>Referenced Documentation<a hidden class=anchor aria-hidden=true href=#referenced-documentation>#</a></h1><ul><li><a href=https://docs.github.com/en/actions/publishing-packages/publishing-docker-images#publishing-images-to-github-packages>https://docs.github.com/en/actions/publishing-packages/publishing-docker-images#publishing-images-to-github-packages</a></li><li><a href=https://github.com/docker/login-action>https://github.com/docker/login-action</a></li><li><a href=https://github.com/docker/metadata-action>https://github.com/docker/metadata-action</a></li><li><a href=https://github.com/docker/build-push-action>https://github.com/docker/build-push-action</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://dbren.uk/tags/devops/>DevOps</a></li><li><a href=https://dbren.uk/tags/ci/cd/>CI/CD</a></li><li><a href=https://dbren.uk/tags/github-actions/>GitHub Actions</a></li><li><a href=https://dbren.uk/tags/containers/>Containers</a></li><li><a href=https://dbren.uk/tags/docker/>Docker</a></li></ul><nav class=paginav><a class=prev href=https://dbren.uk/blog/google-outlook-to-icloud+/><span class=title>¬´ Prev</span><br><span>Migrating from Google Workspace and Outlook Mail to iCloud+</span>
</a><a class=next href=https://dbren.uk/blog/testing-ansible-content/><span class=title>Next ¬ª</span><br><span>Testing Ansible Content with Molecule</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Build and Publish Container Images using GitHub Actions on x" href="https://x.com/intent/tweet/?text=Build%20and%20Publish%20Container%20Images%20using%20GitHub%20Actions&amp;url=https%3a%2f%2fdbren.uk%2fblog%2fbuild-and-publish-container-image-gha%2f&amp;hashtags=DevOps%2cCI%2fCD%2cGitHubActions%2cContainers%2cDocker"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Build and Publish Container Images using GitHub Actions on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fdbren.uk%2fblog%2fbuild-and-publish-container-image-gha%2f&amp;title=Build%20and%20Publish%20Container%20Images%20using%20GitHub%20Actions&amp;summary=Build%20and%20Publish%20Container%20Images%20using%20GitHub%20Actions&amp;source=https%3a%2f%2fdbren.uk%2fblog%2fbuild-and-publish-container-image-gha%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Build and Publish Container Images using GitHub Actions on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fdbren.uk%2fblog%2fbuild-and-publish-container-image-gha%2f&title=Build%20and%20Publish%20Container%20Images%20using%20GitHub%20Actions"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Build and Publish Container Images using GitHub Actions on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fdbren.uk%2fblog%2fbuild-and-publish-container-image-gha%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Build and Publish Container Images using GitHub Actions on whatsapp" href="https://api.whatsapp.com/send?text=Build%20and%20Publish%20Container%20Images%20using%20GitHub%20Actions%20-%20https%3a%2f%2fdbren.uk%2fblog%2fbuild-and-publish-container-image-gha%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Build and Publish Container Images using GitHub Actions on telegram" href="https://telegram.me/share/url?text=Build%20and%20Publish%20Container%20Images%20using%20GitHub%20Actions&amp;url=https%3a%2f%2fdbren.uk%2fblog%2fbuild-and-publish-container-image-gha%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Build and Publish Container Images using GitHub Actions on ycombinator" href="https://news.ycombinator.com/submitlink?t=Build%20and%20Publish%20Container%20Images%20using%20GitHub%20Actions&u=https%3a%2f%2fdbren.uk%2fblog%2fbuild-and-publish-container-image-gha%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://dbren.uk/>Daniel Brennand</a></span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>